<!DOCTYPE html>
<html>
<head>
	<title>Rock, paper, scissors</title>
	<script type="text/javascript">

		function computerPlay() {
			let randomNumber = Math.floor((Math.random()*3+1));
			if (randomNumber == 1) {
				return "rock";
			} else if (randomNumber == 2) {
				return "paper";
			} else if (randomNumber == 3) {
				return "scissors"
			} else {
				alert("Something went wrong!")
			}
		}

		function playRound(playerSelection, computerSelection) {
			playerSelection = playerSelection.toLowerCase()

			let youWin = "You win!"
			let youLose = "You lose!"
			let draw = "Draw!"

			let rockrock = "Both played rock."
			let rockpaper = "Paper beats rock!"
			let rockscissor = "Rock beats scissors!"
			let paperpaper = "Both played paper."
			let paperscissors = "Scissors beat paper!"
			let scissorsscissors = "Both played scissors."

			if (playerSelection == "rock") {
				if (computerSelection == "rock") {
					winMessage = draw;
					playMessage = rockrock;
				} else if (computerSelection == "paper") {
					winMessage = youLose;
					playMessage = rockpaper;
				} else if (computerSelection == "scissors") {
					winMessage = youWin;
					playMessage = rockscissor;
				}
			}
			if (playerSelection == "paper") {
				if (computerSelection == "rock") {
					winMessage = youWin;
					playMessage = rockpaper;
				} else if (computerSelection == "paper") {
					winMessage = draw;
					playMessage = paperpaper;
				} else if (computerSelection == "scissors") {
					winMessage = youLose;
					playMessage = paperscissors;
				}
			}
			if (playerSelection == "scissors") {
				if (computerSelection == "rock") {
					winMessage = youLose;
					playMessage = rockscissor;
				} else if (computerSelection == "paper") {
					winMessage = youWin;
					playMessage = paperscissors;
				} else if (computerSelection == "scissors") {
					winMessage = draw;
					playMessage = scissorsscissors;
				}
			}

			return winMessage + " " + playMessage
		}

		function playGame(roundsToPlay = 5) {
			
			let playerScore = 0;
			let computerScore = 0;
			let roundsPlayed = 0;

			while (roundsPlayed < roundsToPlay) {

				let playerSelection = prompt("What's your move?");
				// TODO: Validate response

				round = playRound(playerSelection, computerPlay());

				if (round.indexOf("win") != -1) {
					playerScore += 1;
				} else if (round.indexOf("lose") != -1) {
					computerScore += 1;
				} else if (round.indexOf("Draw") != -1) {
					// Draw. No score update needed.
				}

				console.log("Round " + (roundsPlayed + 1) + ":")
				console.log(round)
				roundsPlayed += 1;
			}

		return "Your score: " + playerScore + ". Computer score: " + computerScore

		}

	</script>
</head>
<body>

</body>
</html>